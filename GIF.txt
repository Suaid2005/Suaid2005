import networkx as nx
import matplotlib.pyplot as plt
import numpy as np
import imageio
from IPython.display import Image

# Build graph
G = nx.Graph()
edges = [(0,1),(0,2),(1,3),(1,4),(2,5),(2,6)]
G.add_edges_from(edges)
pos = nx.spring_layout(G)

visited = set()
frames = []

def dfs(node, parent=None):
    visited.add(node)
    
    # Draw current state
    fig, ax = plt.subplots()
    nx.draw(G, pos, ax=ax, with_labels=True,
            node_color=['orange' if n in visited else 'lightblue' for n in G.nodes()])
    if parent is not None:
        nx.draw_networkx_edges(G, pos, ax=ax, edgelist=[(parent,node)], edge_color='red', width=2)
    
    # Capture frame
    fig.canvas.draw()
    image = np.array(fig.canvas.buffer_rgba())
    frames.append(image)
    plt.close(fig)
    
    # Continue DFS
    for neighbor in G.neighbors(node):
        if neighbor not in visited:
            dfs(neighbor, node)

# Run DFS
dfs(0)
print("Frames captured:", len(frames))

# Save GIF with slow speed (e.g., 5 seconds per frame, infinite loop)
output_path = "dfs_traversal.gif"
imageio.mimsave(output_path, frames, duration=500, loop=0)

# Display GIF
Image(filename=output_path)
