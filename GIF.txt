# Install libraries if not already installed
# !pip install networkx matplotlib imageio

import networkx as nx
import matplotlib.pyplot as plt
import numpy as np
import imageio
from IPython.display import Image

# 1. Build the graph
G = nx.Graph()
edges = [(0,1),(0,2),(1,3),(1,4),(2,5),(2,6)]
G.add_edges_from(edges)

# Layout for visualization
pos = nx.spring_layout(G)

# 2. Initialize visited set and frame list
visited = set()
frames = []

# 3. DFS traversal with frame capture
def dfs(node, parent=None):
    visited.add(node)
    
    # Draw current state
    fig, ax = plt.subplots()
    nx.draw(G, pos, ax=ax, with_labels=True,
            node_color=['orange' if n in visited else 'lightblue' for n in G.nodes()])
    if parent is not None:
        nx.draw_networkx_edges(G, pos, ax=ax, edgelist=[(parent,node)], edge_color='red', width=2)
    
    # Capture frame
    fig.canvas.draw()
    image = np.array(fig.canvas.buffer_rgba())   # safe way to capture pixels
    frames.append(image)
    plt.close(fig)
    
    # Continue DFS
    for neighbor in G.neighbors(node):
        if neighbor not in visited:
            dfs(neighbor, node)

# 4. Run DFS starting from node 0
dfs(0)
print("Frames captured:", len(frames))  # should be > 0

# 5. Save frames as GIF
output_path = "dfs_traversal.gif"
imageio.mimsave(output_path, frames, duration=1)  # 1 second per frame

# 6. Display GIF inline in Jupyter
Image(filename=output_path)
